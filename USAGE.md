# 使用指南

## 🎯 快速开始

### 方式1: 界面内3D预览（推荐）

```
[图片批量] → [多视角图片批量输入] → [3D预览 🎬]
```

**效果：**
- ✅ 直接在 ComfyUI 界面显示 3D 场景
- ✅ 实时交互（鼠标拖拽旋转）
- ✅ 可点击切换自动旋转
- ✅ 显示加载进度和状态

**界面预览：**
```
┌─────────────────────────────────────┐
│ ✅ 环形 | 🖱️ 拖拽旋转 | 🔄 自动旋转  │  ← 点击切换旋转
├─────────────────────────────────────┤
│                                     │
│          🎨 3D 场景                 │
│       (可以拖拽旋转)                 │
│                                     │
│                                     │
└─────────────────────────────────────┘
```

### 方式2: 简单图片预览

```
[图片批量] → [多视角图片批量输入] → [多视角图片预览 🖼️]
```

**效果：**
- ✅ 显示所有图片缩略图
- ✅ 使用 ComfyUI 原生预览
- ✅ 无需加载 3D 库
- ✅ 速度快，适合调试

### 方式3: 导出 HTML 文件

```
[图片批量] → [多视角图片批量输入] → [保存3D预览HTML 💾]
```

**效果：**
- ✅ 生成独立的 HTML 文件
- ✅ 可在任何浏览器打开
- ✅ 完整的 3D 功能
- ✅ 方便分享

---

## 📋 完整工作流示例

### 示例1: 从图片列表到3D预览

```
┌──────────────┐
│ 加载图片批量  │ (6张图片)
└──────┬───────┘
       ↓
┌──────────────────────┐
│ 多视角图片批量输入    │ 📦
└──────┬───────────────┘
       ↓
┌──────────────────────┐
│    3D预览 🎬         │
│ ┌────────────────┐   │
│ │ ✅ 环形 🔄     │   │
│ ├────────────────┤   │
│ │   3D 场景      │   │  ← 界面内直接显示
│ │ (可拖拽旋转)    │   │
│ └────────────────┘   │
└──────────────────────┘
```

### 示例2: 调试+导出组合

```
┌──────────────┐
│ 加载图片批量  │ (5-8张图片)
└──────┬───────┘
       ↓
┌──────────────────────┐
│ 多视角图片批量输入    │ 📦
└──────┬───────────────┘
       ├───────────────────┐
       ↓                   ↓
┌──────────────┐   ┌─────────────────┐
│ 图片预览 🖼️  │   │ 保存HTML 💾     │
│              │   │                 │
│ [图1][图2]   │   │ → output/       │
│ [图3][图4]   │   │   3d_view.html  │
│ [图5][图6]   │   │                 │
└──────────────┘   └─────────────────┘
   ↑ 快速检查           ↑ 最终导出
```

---

## 🎮 界面操作

### 3D 预览节点

```
┌──────────────────────────────────────┐
│ [节点参数]                            │
│  preview_mode: 🎨 carousel           │
│  rotation_speed: 1.0                 │
│  auto_rotate: ✓                      │
├──────────────────────────────────────┤
│ ✅ 环形 | 🖱️ 拖拽旋转 | 🔄 自动旋转   │  ← 状态栏
├──────────────────────────────────────┤
│                                      │
│                                      │
│           [3D 场景区域]               │
│     图片围成一圈，缓缓旋转              │
│                                      │
│                                      │
└──────────────────────────────────────┘
```

**交互说明：**
- 🖱️ **拖拽**: 按住鼠标左键拖动 = 旋转视角
- 👆 **点击状态栏**: 切换自动旋转开/关
- 📊 **状态显示**:
  - ⏳ 加载中: "⏳ 加载图片 3/6..."
  - ✅ 完成: "✅ 环形 | 🖱️ 拖拽旋转 | 🔄 自动旋转"
  - ⏸️ 暂停: "✅ 环形 | 🖱️ 拖拽旋转 | ⏸️ 已暂停"

---

## 🎨 预览模式对比

### Carousel (环形)
```
    图6   图1
  图5   💠   图2
    图4   图3
    
✓ 适合: 360度环绕拍摄
✓ 推荐: 6-8张图片
✓ 效果: 围成一圈排列
```

### Sphere (球形)
```
      图1
  图3  💠  图2
      图4
    图5 图6
    
✓ 适合: 全方位多角度拍摄  
✓ 推荐: 5-8张图片
✓ 效果: 球面分布
```

### Cube (立方体)
```
      上
  左  前  右
      下  后
      
✓ 适合: 六个主要方向
✓ 推荐: 6张图片 (前后左右上下)
✓ 效果: 正交排列
```

---

## 🔧 参数说明

### MultiView3DPreview 节点参数

| 参数 | 类型 | 范围 | 默认值 | 说明 |
|------|------|------|--------|------|
| **preview_mode** | 下拉选择 | carousel/sphere/cube | carousel | 3D布局模式 |
| **rotation_speed** | 数字 | 0.1 - 5.0 | 1.0 | 自动旋转速度 |
| **auto_rotate** | 勾选框 | ✓/✗ | ✓ | 是否自动旋转 |

**速度参考：**
- 0.5 = 慢速旋转 🐌
- 1.0 = 正常速度 ⚡
- 2.0 = 快速旋转 🚀
- 3.0+ = 超快旋转 💨

---

## 📂 文件输出

### SaveMultiView3D 节点

输出文件位置：
```
ComfyUI/
  └── output/
      ├── view_0.png       ← 图片文件
      ├── view_1.png
      ├── view_2.png
      ├── ...
      └── 3d_preview.html  ← HTML文件
```

**HTML 文件特点：**
- 📦 完全独立，包含所有代码
- 🌐 可在任何现代浏览器打开
- 📱 支持移动设备触摸操作
- 🔗 图片使用相对路径引用

**分享方法：**
1. 复制整个 `output` 文件夹
2. 或将图片和 HTML 放在同一目录
3. 双击 HTML 文件即可查看

---

## ⚡ 性能优化建议

### 图片数量
- ✅ **推荐**: 5-8张图片
- ⚠️ **可以**: 3-4张图片（效果较差）
- ⚠️ **不推荐**: 超过10张（加载慢）

### 图片尺寸
- ✅ **推荐**: 512x512 或 1024x1024
- ⚠️ **可以**: 2048x2048（加载较慢）
- ❌ **不推荐**: 超过 4K（性能问题）

### 使用建议
- 调试时使用 **图片预览** 节点
- 最终效果使用 **3D预览** 节点
- 需要分享使用 **保存HTML** 节点

---

## 🐛 常见问题

### Q: 3D预览节点显示空白？

**可能原因：**
1. Three.js 库加载失败
2. 图片路径错误
3. 浏览器不支持 WebGL

**解决方法：**
```
1. 检查浏览器控制台错误信息
2. 确认网络可以访问 CDN
3. 尝试使用 "图片预览" 节点检查图片
```

### Q: HTTP 错误 LineTooLong？

**已修复！** ✅  
- 旧版本使用 base64 传输导致
- 新版本使用文件路径，无此问题

### Q: 图片加载很慢？

**优化方法：**
1. 减小图片尺寸（512x512 足够）
2. 减少图片数量（6张最佳）
3. 使用 PNG 压缩级别 4

### Q: 可以添加更多图片吗？

**可以！**
- **批量输入节点**: 无限制
- **单个输入节点**: 最多8张
- **推荐数量**: 6-8张获得最佳效果

---

## 🎯 最佳实践

### 拍摄建议
```
1. 保持相机高度一致
2. 均匀分布拍摄角度
3. 保持光照条件稳定
4. 避免背景过于复杂
```

### 工作流建议
```
┌────────────┐
│ 1. 准备图片 │ → 统一尺寸、格式
└──────┬─────┘
       ↓
┌────────────┐
│ 2. 快速预览 │ → 使用图片预览节点
└──────┬─────┘
       ↓
┌────────────┐
│ 3. 调整参数 │ → 尝试不同模式和速度
└──────┬─────┘
       ↓
┌────────────┐
│ 4. 3D预览  │ → 确认最终效果
└──────┬─────┘
       ↓
┌────────────┐
│ 5. 导出HTML │ → 保存和分享
└────────────┘
```

---

## 📚 更多资源

- **主文档**: [README.md](README.md)
- **批量输入说明**: [BATCH_INPUT_README.md](BATCH_INPUT_README.md)
- **修复记录**: [FIXES.md](FIXES.md)
- **GitHub**: https://github.com/bank010/ComfyUI-Multi-View-3D-Preview-Plugin

---

## 💡 提示

- 🎨 调试时先用"图片预览"检查
- 🚀 最终效果用"3D预览"查看
- 💾 需要分享用"保存HTML"导出
- 🖱️ 记得点击状态栏可以切换旋转！

**祝你使用愉快！** 🎉
